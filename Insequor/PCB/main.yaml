# Choc keycaps are 17.5 x 16.5
# cx = 18
# cy = 17
# bind: [up,right,down,left] + rotation
# bind15u: [5,right,5,left] (optoinal)
# MX keycaps are 18 x 18
# U = 19.05
# u = 19
points:
  key:
    padding: u
    footprints:
      choc_hotswap:
        type: choc
        nets:
          from: =column_net
          to: GND
        params:
          keycaps: true
          reverse: true
          hotswap: true
      mx_hotswap:
        type: mx
        anchor:
          rotate: 180
        nets:
          from: =column_net
          to: GND
        params:
          keycaps: true
          reverse: true
          hotswap: true
      diode:
        type: diode
        nets:
          from: =colrow
          to: =row_net
        anchor:
          shift: [0, -5]
  zones:
    matrix:
      key:
        tags:
          1u: true
      key.padding: u
      columns:
        outerpinkie:
        pinkie:
        ring:
          stagger: 7
        middle:
          stagger: 7
        index:
          stagger: -7
        far:
          stagger: -7
      rows:
        bottom:
        middle:
        home:
        top:
    thumbfan:
      anchor:
        ref: matrix_index_top
        shift: [-25,-85]
      columns:
        first:
          stagger: 8
        second:
        third:
          stagger: -10
        fourth:
          stagger: 7
          spread: 25
          rotate: -25
        fifth:
          rotate: -25
          stagger: -5
          spread: 22
      rows:
        bottom:
outlines:
  exports:
    raw_0:
      - type: keys
        side: left
        size: [18,18]
    promicro_rectangle:
      - type: rectangle
        size: [40, 69]
        anchor:
          ref: matrix_far_bottom
    topleftcorner_repair:
      - type: rectangle
        size: [20,20]
        anchor:
          ref: matrix_outerpinkie_top
          shift: [-17,-8]
    raw:
      - type: keys
        side: left
        size: [1cx, 1cx]
      - type: outline
        name: promicro_rectangle
      - type: outline
        name: topleftcorner_repair
    switches_slots:
      main:
        type: keys
        side: left
        size: 14
        bound: false
    keycaps_choc:
      main:
        type: keys
        side: left
        size: [1cx - 0.5, 1cy - 0.5]
        bound: false
    keycaps_mx:
      main:
        type: keys
        side: left
        size: [18,18]
        bound: false
    circle_top:
      - type: circle
        radius: 153.1
        anchor:
          ref: matrix_middle_home
          shift: [2,-116]
      - type: rectangle
        size: [360,295.6]
        operation: subtract
        anchor:
          ref: matrix_middle_home
          shift: [-152,-278.6]
    frame:
      - type: polygon
        points:
          - ref: matrix_outerpinkie_top
            shift: [-17,12]
          - ref: matrix_outerpinkie_bottom
            shift: [-17,-17]
          - ref: matrix_pinkie_bottom
            shift: [0,-17]
          - ref: thumbfan_first_bottom
            shift: [-12,-17]
          - ref: thumbfan_second_bottom
            shift: [-2,-17]
          - ref: thumbfan_third_bottom
            shift: [-13,-17]
          - ref: thumbfan_third_bottom
            shift: [28,-17]
          - ref: thumbfan_fifth_bottom
            shift: [18,-17]
          - ref: thumbfan_fifth_bottom
            shift: [18,17]
          - ref: matrix_far_middle
            shift: [43,-25]
          - ref: matrix_far_top
            shift: [6,12]
    frame_fillet:
      - type: outline
        name: frame
        fillet: 7
    cutout:
      - type: outline
        name: raw
      - type: outline
        name: frame_fillet
        operation: add
      - type: outline
        name: circle_top
    plate:
      main:
        type: outline
        name: cutout
      switches:
        type: outline
        name: switches_slots
        operation: subtract
    plate_with_keycaps:
      main:
        type: outline
        name: cutout
      keycaps:
        type: keys
        side: left
        size: [18,18]
        operation: subtract
    pcb:
      main:
        type: outline
        name: cutout
      sockets:
        type: outline
        name: raw_0
        operation: subtract
pcbs:
  insequor58:
    outlines:
      matrix:
        outline: cutout
      keycaps:
        outline: keycaps_preview
        layer: Eco1.User
    footprints:
      promicro:
        type: promicro
        anchor:
          ref: matrix_far_top
      trrs:
        type: trrs
        nets:
          A: GND
          B: GND
          C: P2
          D: VCC
        anchor:
          ref: matrix_far_top
        params:
          reverse: true
          symmetric: true
      reset:
        type: button
        anchor:
          ref:
            - matrix_far_home
          shift: [17, 0]
          rotate: 270
        params:
          variant: 2_pin_th
        nets:
          from: GND
          to: RST
cases:
  plate:
    - type: outline
      name: plate
      extrude: 4
